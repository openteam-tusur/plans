<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <%= wicked_pdf_stylesheet_link_tag "pdf" -%>
  </head>
  <body>
    <div class="title_page">
      <p class="ministry strong center uppercase">Министерство образования и науки Росиийской Федерации</p>
      <p class="university_type center">Федеральной государственное бюджетное образовательное учереждение высшего профессионального образования</p>
      <p class="university strong center uppercase">«Томский государственный университет систем управления и радиоэлектроники» (ТУСУР)</p>
      <div class='first_prorector'>
        <p class="center uppercase">Утверждаю</p>
        <p>Первый проректор-<br/> проректор по учебной работе</p>
        <p>_______________________ Л. А. Боков</p>
        <p>«____» _____________________ <%= resource.year %> г.</p>
      </div>
      <div class="programm_info">
        <p class="center uppercase strong">Рабочая программа</p>
        <table class="programm_info">
          <tr>
            <td class="left_part">По дисциплине</td>
            <td><%= title_page.discipline_title %></td>
          </tr>
          <tr>
            <td class="left_part"><%= title_page.speciality_kind %></td>
            <td><%= title_page.speciality_title %></td>
          </tr>
          <tr>
            <td class="left_part">Факультет</td>
            <td><%= title_page.department_title %></td>
          </tr>
          <tr>
            <td class="left_part">Профилирующая кафедра</td>
            <td><%= title_page.subdepartment_title %></td>
          </tr>
          <tr>
            <td class="left_part">Курс</td>
            <td><%= title_page.courses %></td>
          </tr>
          <tr>
            <td class="left_part">Семестр</td>
            <td><%= title_page.semesters %></td>
          </tr>
        </table>
        <p class="center"><%= title_page.speciality_year %></p>
      </div>

      <div class="programm_loading">
        <p>Распределение учебного времени</p>
        <table>
          <% title_page.scheduling.header.each do |row| %>
            <tr>
              <% row.each do |cell| %>
                <%= content_tag :th, cell.delete(:content), cell %>
              <% end %>
            </tr>
          <% end %>
          <% title_page.scheduling.to_a.each do |row| %>
            <tr>
              <% row.each do |cell| %>
                <td class="cell"><%= cell %></td>
              <% end %>
            </tr>
          <% end %>
        </table>
      </div>

      <div class="programm_checks">
        <table>
          <% title_page.checks.to_a.each do |row| %>
            <tr>
              <% row.each do |cell| %>
                <td><%= cell %></td>
              <% end %>
            </tr>
          <% end %>
        </table>
      </div>
    </div> <!-- end title_page -->
    <div class="center year"><%= title_page.year_line %></div>

    <div class="page-break"></div>

    <div class="sign_page">
      <div class="authors">
        <p>Рабочая программа составлена на основании ГОС ВПО
          для специальности <%= sign_page.gos.code %> «<%= sign_page.gos.title %>» утвержденного <%= sign_page.gos.localized_approved_on %>,
          и утверждена на заседании кафедры «____» ______________ г., протокол № _______</p>

        <p class="widthout_indent"><%= sign_page.authors_header %></p>

        <%= table(sign_page.authors, 'authors') %>

        <%= table([sign_page.subdepartment_chief], 'subdepartment_chief') %>
      </div>
      <div class="coordinators">
        <p class='coordinators'>Рабочая программа согласована с факультетом, профилирующей и выпускающей кафедрами специальности</p>

        <%= table([sign_page.department_chief], 'department_chief') %>
        <%= table(sign_page.coordiantors, 'coordinators') %>
      </div>
    </div> <!-- end sign_page -->

    <div class="page-break"></div>

    <div class='purposes_and_tasks_page'>
      <h1 class='uppercase strong'>1. Цели и задачи дисциплины, ее место в учебном процессе</h1>
      <h2 class='strong'>1.1 Цели преподавания дисциплины</h2>
      <%= purposes_and_tasks_page.purposes %>
      <h2 class='strong'>1.2 Задачи изучения дисциплины</h2>
      <%= purposes_and_tasks_page.tasks %>
      <h2 class='strong'>1.3 Место дисциплины в структуре ООП</h2>
      <%= purposes_and_tasks_page.dependencies %>
    </div> <!-- end purposes_and_tasks_page -->

    <div class="page-break"></div>

    <div class='content_chapter'>
      <h1 class='uppercase strong'>2. Содержание дисциплины</h1>
      <% Exercise.enum_values(:kind).each_with_index do |kind, index| %>
        <h2 class='strong'>2.<%= index+1 %> <%= t("activerecord.attributes.exercise.#{kind.pluralize}") %></h2>
        <% grouped_loadings = Hash[resource.discipline.loadings.where(:loading_kind => kind).group_by(&:semester).sort{|a,b| a[0].number <=> b[0].number}] %>
        <% if grouped_loadings.any? %>
          <table class='exercises'>
            <tbody>
              <% grouped_loadings.each do |semester, loadings| %>
                <tr class='semester'>
                  <td class='semester'><%= semester %></td>
                  <td class='hours'><%= title_page.scheduling.send(kind).hours[semester.number] %></td>
                </tr>
                <% resource.exercises_by_semester_and_kind(semester, kind).each do |exercise| %>
                  <tr>
                    <td>
                      <div class='exercises_title strong'><%= exercise.title %></div>
                      <div class='description'><%= simple_format exercise.description %></div>
                    </td>
                    <td class='hours'>
                      <%= exercise.volume %>
                    </td>
                  </tr>
                <% end %>
              <% end %>
              <tr class='total_hours'>
                <td colspan='2'>
                 Всего часов: <span><%= title_page.scheduling.send(kind).total %></span>
                </td>
              </tr>
            </tbody>
          </table>

          <div class="page-break"></div>
          
        <% else %>
          <%= content_tag :p, 'Занятия не предусмотрены учебным планом' %>
        <% end %>
      <% end %>
    </div> <!-- end content_chapter -->

  </body>
</html>

